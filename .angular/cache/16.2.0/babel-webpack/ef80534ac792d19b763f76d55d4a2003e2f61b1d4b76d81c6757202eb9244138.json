{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/lerth/Documents/Lifestyle/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { NewDiaryPage } from '../new-diary/new-diary.page';\nimport { ShowDiaryPage } from '../show-diary/show-diary.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../storage.service\";\nimport * as i3 from \"@angular/common\";\nfunction DiaryPage_ion_card_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 8);\n    i0.ɵɵlistener(\"click\", function DiaryPage_ion_card_9_Template_ion_card_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const i_r2 = restoredCtx.index;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.showDiary(ctx_r3.showDiaries.length - i_r2 - 1));\n    });\n    i0.ɵɵelementStart(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-card-subtitle\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"date\");\n    i0.ɵɵpipe(8, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"ion-card-content\", 9);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const diary_r1 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 4, diary_r1.date, \"dd MMM YYYY\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind2(7, 7, diary_r1.date, \"EEE\"), \" \", i0.ɵɵpipeBind2(8, 10, diary_r1.date, \"hh:mm aa\"), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(diary_r1.diary);\n  }\n}\nexport let DiaryPage = /*#__PURE__*/(() => {\n  var _class;\n  class DiaryPage {\n    constructor(modalController, storageServe) {\n      this.modalController = modalController;\n      this.storageServe = storageServe;\n      this.showDiaries = []; // Diary array\n    }\n\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.showDiaries = yield _this.storageServe.accessStorage(\"diaries\");\n      })();\n    }\n    // Modal page to write and save a new diary\n    writeDiary() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this2.modalController.create({\n          component: NewDiaryPage,\n          componentProps: {\n            month: new Date().getMonth(),\n            date: new Date().toISOString(),\n            mood: 0,\n            diary: \"\",\n            place: \"\",\n            lat: null,\n            long: null,\n            img: null\n          }\n        });\n        modal.onDidDismiss().then(results => {\n          let newDiary = {\n            month: results.data.month,\n            date: results.data.date,\n            mood: results.data.mood,\n            diary: results.data.diary,\n            place: results.data.place,\n            lat: results.data.lat,\n            long: results.data.long,\n            img: results.data.img\n          };\n          _this2.showDiaries.push(newDiary);\n          _this2.storageServe.saveData(\"diaries\", _this2.showDiaries); // Update storage\n        });\n\n        return modal.present();\n      })();\n    }\n    // Modal page to show and edit diary\n    showDiary(i) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const modal = yield _this3.modalController.create({\n          component: ShowDiaryPage,\n          componentProps: {\n            month: _this3.showDiaries[i].month,\n            date: _this3.showDiaries[i].date,\n            mood: _this3.showDiaries[i].mood,\n            diary: _this3.showDiaries[i].diary,\n            place: _this3.showDiaries[i].place,\n            lat: _this3.showDiaries[i].lat,\n            long: _this3.showDiaries[i].long,\n            img: _this3.showDiaries[i].img\n          }\n        });\n        modal.onDidDismiss().then(results => {\n          // Delete diary\n          if (results.data.delete) {\n            _this3.showDiaries.splice(i, 1);\n          }\n          //Save edited diary\n          else {\n            _this3.showDiaries[i].diary = results.data.diary;\n          }\n          //Update storage\n          _this3.storageServe.saveData(\"diaries\", _this3.showDiaries);\n        });\n        return modal.present();\n      })();\n    }\n  }\n  _class = DiaryPage;\n  _class.ɵfac = function DiaryPage_Factory(t) {\n    return new (t || _class)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n  _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _class,\n    selectors: [[\"app-diary\"]],\n    decls: 13,\n    vars: 3,\n    consts: [[3, \"translucent\"], [3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"vertical\", \"bottom\", \"horizontal\", \"end\", \"slot\", \"fixed\"], [\"size\", \"small\", 3, \"click\"], [\"name\", \"add\"], [3, \"click\"], [1, \"item-text-wrap\"]],\n    template: function DiaryPage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-title\");\n        i0.ɵɵtext(3, \"Diary\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(4, \"ion-content\", 1)(5, \"ion-header\", 2)(6, \"ion-toolbar\")(7, \"ion-title\", 3);\n        i0.ɵɵtext(8, \"Diary\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(9, DiaryPage_ion_card_9_Template, 11, 13, \"ion-card\", 4);\n        i0.ɵɵelementStart(10, \"ion-fab\", 5)(11, \"ion-fab-button\", 6);\n        i0.ɵɵlistener(\"click\", function DiaryPage_Template_ion_fab_button_click_11_listener() {\n          return ctx.writeDiary();\n        });\n        i0.ɵɵelement(12, \"ion-icon\", 7);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"translucent\", true);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"fullscreen\", true);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.showDiaries.slice().reverse());\n      }\n    },\n    dependencies: [i3.NgForOf, i3.DatePipe]\n  });\n  return DiaryPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}